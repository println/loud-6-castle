"use strict";(self.webpackChunkloud_6_castle=self.webpackChunkloud_6_castle||[]).push([[592],{4807:(_,m,i)=>{i.d(m,{$:()=>p});var e=i(7716);let p=(()=>{class c{convert(n){const r={};r.totalItems=n.count,r.nextPageIndex=this.extractPageIndex(n.next),r.previousPageIndex=this.extractPageIndex(n.previous),r.currentPageIndex=this.getCurrent(r),r.itemsByPage=this.getPageSize(n);const o={};return o.items=this.setId(n.results),o.paging=r,o}extractId(n){let r=n.match(/(\d+)/g)||[];return parseInt(r)}setId(n){return n.map(r=>(r.id=this.extractId(r.url),r))}extractPageIndex(n){if(n){let r=n.match(/(\d+)/g)||[];return this.fixIndex(r)}return 0}getCurrent(n){return n.nextPageIndex?n.nextPageIndex-1:n.previousPageIndex?n.previousPageIndex+1:1}getPageSize(n){return 10}fixIndex(n){return n?parseInt(n):0}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},7161:(_,m,i)=>{i.d(m,{z:()=>e});class e{static filter(c,h=[]){if(!c)return{};const n=["size","page","sort"].concat(h);return Object.entries(c).filter(([r,o])=>n.includes(r)).reduce((r,o)=>(r[o[0]]=o[1],r),{})}}},3338:(_,m,i)=>{i.d(m,{M:()=>I});var e=i(7716),p=i(4655),c=i(8583),h=i(8177),n=i(4996);let r=(()=>{class s{constructor(){this.isLoading=!1,this.changePage=new e.vpe}ngOnInit(){}onChangePage(t){if(t){const a=parseInt(t);this.changePage.emit(a)}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-paging"]],inputs:{data:"data",isLoading:"isLoading"},outputs:{changePage:"changePage"},decls:2,vars:7,consts:[["size","lg",1,"d-flex","justify-content-center",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","disabled","pageChange"]],template:function(t,a){1&t&&(e.TgZ(0,"ngb-pagination",0),e.NdJ("pageChange",function(g){return a.onChangePage(g)}),e.qZA(),e._uU(1,"\n")),2&t&&e.Q6J("collectionSize",null==a.data?null:a.data.totalItems)("page",null==a.data?null:a.data.currentPageIndex)("pageSize",null==a.data?null:a.data.itemsByPage)("maxSize",3)("rotate",!0)("boundaryLinks",!0)("disabled",a.isLoading)},directives:[n.N9],styles:[""]}),s})();var o=i(3679);const P=["searchForm"],y=["*"];let v=(()=>{class s{constructor(t){this.route=t,this.search=new e.vpe,this.lastQuery={}}ngOnInit(){this.route.queryParams.subscribe(t=>{this.refreshFormParams(t)})}ngAfterViewInit(){this.refreshData&&(this.refreshFormParams(this.refreshData),this.refreshData=void 0)}onFilter(t){const a=this.getFormElements(t.target).reduce((l,f)=>(l[f.name]=f.value?f.value:null,l),{});JSON.stringify(a,(l,f)=>{if(null!==f)return f})!=JSON.stringify(this.lastQuery)&&this.search.emit(a)}refreshFormParams(t){this.form?(this.lastQuery={},this.getFormElements(this.form.nativeElement).forEach(u=>{const g=u.name,l=t[g];l&&(u.value=l,this.lastQuery[g]=l)})):this.refreshData=t}getFormElements(t){return Array.from(t.querySelectorAll("select, input, textarea"))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-search-bar"]],viewQuery:function(t,a){if(1&t&&e.Gf(P,5),2&t){let u;e.iGM(u=e.CRH())&&(a.form=u.first)}},outputs:{search:"search"},ngContentSelectors:y,decls:25,vars:0,consts:[[1,"d-flex","flex-row","flex-fill","align-items-center","justify-content-between","mb-1","p-3","rounded","bg-white",3,"submit"],["searchForm",""],[1,"m-1","h5","fw-bold","fs-5"],[1,"row","g-3","align-items-center"],[1,"stn-action-bar"],["type","reset","value","Reset",1,"btn","btn-outline-warning","btn-sm"],[1,"fas","fa-undo","fa-fw"],["type","submit",1,"btn","btn-outline-primary"],[1,"fas","fa-search","fa-fw"]],template:function(t,a){1&t&&(e.F$t(),e.TgZ(0,"form",0,1),e.NdJ("submit",function(g){return a.onFilter(g)}),e._uU(2,"\n  "),e.TgZ(3,"h4",2),e._uU(4,"Filter"),e.qZA(),e._uU(5,"\n  "),e.TgZ(6,"div",3),e._uU(7,"\n    "),e.Hsn(8),e._uU(9,"\n  "),e.qZA(),e._uU(10,"\n  "),e.TgZ(11,"div",4),e._uU(12,"\n    "),e.TgZ(13,"button",5),e._uU(14,"\n      "),e._UZ(15,"i",6),e._uU(16,"\n      Reset\n    "),e.qZA(),e._uU(17,"\n    "),e.TgZ(18,"button",7),e._uU(19,"\n      "),e._UZ(20,"i",8),e._uU(21,"\n      Apply\n    "),e.qZA(),e._uU(22,"\n  "),e.qZA(),e._uU(23,"\n"),e.qZA(),e._uU(24,"\n"))},directives:[o._Y,o.JL,o.F],styles:[""]}),s})();function C(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"app-search-bar",4),e.NdJ("search",function(u){return e.CHM(t),e.oxw().onFilter(u)}),e._uU(1,"\n    "),e.Hsn(2,1),e._uU(3,"\n  "),e.qZA()}}const b=[[["","grid-view",""]],[["","search-fields",""]]],U=["[grid-view]","[search-fields]"];let I=(()=>{class s{constructor(t,a){this.route=t,this.router=a,this.isLoading=!1,this.searchBar=!1}get data(){return this._data}set data(t){t&&(this.isLoading=!1),this._data=t}ngOnInit(){}ngOnDestroy(){}onFilter(t){t&&(this.isLoading=!0,this.navigate(t))}onChangePage(t){t>0&&(this.isLoading=!0,this.navigate({page:t}))}navigate(t){const a=this.makeQueryParams(t);this.router.navigate([],{relativeTo:this.route,queryParams:a})}makeQueryParams(t){const u=Object.assign({},this.route.snapshot.queryParams,t);return Object.keys(t).filter(l=>null==t[l]).forEach(l=>delete u[l]),u}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.gz),e.Y36(p.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-grid"]],inputs:{searchBar:"searchBar",data:"data"},ngContentSelectors:U,decls:14,vars:5,consts:[[3,"search",4,"ngIf"],[1,"position-relative"],[3,"isExpandable","isLoading"],[3,"data","isLoading","changePage"],[3,"search"]],template:function(t,a){1&t&&(e.F$t(b),e.ynx(0),e._uU(1,"\n  "),e.YNc(2,C,4,0,"app-search-bar",0),e._uU(3,"\n  "),e.TgZ(4,"div",1),e._uU(5,"\n    "),e._UZ(6,"app-loader",2),e._uU(7,"\n    "),e.Hsn(8),e._uU(9,"\n  "),e.qZA(),e._uU(10,"\n  "),e.TgZ(11,"app-paging",3),e.NdJ("changePage",function(g){return a.onChangePage(g)}),e.qZA(),e._uU(12,"\n"),e.BQk(),e._uU(13,"\n")),2&t&&(e.xp6(2),e.Q6J("ngIf",a.searchBar),e.xp6(4),e.Q6J("isExpandable",!0)("isLoading",a.isLoading),e.xp6(5),e.Q6J("data",null==a.data?null:a.data.paging)("isLoading",a.isLoading))},directives:[c.O5,h.R,r,v],styles:[""]}),s})()},7109:(_,m,i)=>{i.d(m,{I:()=>h});var e=i(7716);const p=[[["","page-title",""]],[["","page-action-bar",""]],"*"],c=["[page-title]","[page-action-bar]","*"];let h=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-page"]],ngContentSelectors:c,decls:13,vars:0,consts:[[1,"container"],[1,"d-flex","flex-row","justify-content-between","align-items-center","mb-3"],[1,"fw-bold"]],template:function(o,P){1&o&&(e.F$t(p),e.TgZ(0,"div",0),e._uU(1,"\n  "),e.TgZ(2,"header",1),e._uU(3,"\n    "),e.TgZ(4,"h2",2),e.Hsn(5),e.qZA(),e._uU(6,"\n    "),e.Hsn(7,1),e._uU(8,"\n  "),e.qZA(),e._uU(9,"\n  "),e.Hsn(10,2),e._uU(11,"\n"),e.qZA(),e._uU(12,"\n"))},styles:[""]}),n})()}}]);