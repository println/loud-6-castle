"use strict";(self.webpackChunkloud_6_castle=self.webpackChunkloud_6_castle||[]).push([[592],{4807:(F,h,o)=>{o.d(h,{$:()=>t});var e=o(7716);let t=(()=>{class u{convert(a){const i={};i.totalItems=a.count,i.nextPageIndex=this.extractPageIndex(a.next),i.previousPageIndex=this.extractPageIndex(a.previous),i.currentPageIndex=this.getCurrent(i),i.itemsByPage=this.getPageSize(a);const c={};return c.items=this.setId(a.results),c.paging=i,c}extractId(a){let i=a.match(/(\d+)/g)||[];return parseInt(i)}setId(a){return a.map(i=>(i.id=this.extractId(i.url),i))}extractPageIndex(a){if(a){let i=a.match(/(\d+)/g)||[];return this.fixIndex(i)}return 0}getCurrent(a){return a.nextPageIndex?a.nextPageIndex-1:a.previousPageIndex?a.previousPageIndex+1:1}getPageSize(a){return 10}fixIndex(a){return a?parseInt(a):0}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},7161:(F,h,o)=>{o.d(h,{z:()=>e});class e{static filter(u,v=[]){if(!u)return{};const a=["size","page","sort"].concat(v);return Object.entries(u).filter(([i,c])=>a.includes(i)).reduce((i,c)=>(i[c[0]]=c[1],i),{})}}},3993:(F,h,o)=>{o.d(h,{I:()=>I});var e=o(3679),t=o(7716),u=o(8583);function v(d,C){1&d&&(t.TgZ(0,"span"),t._uU(1,"Please provide a valid value"),t.qZA())}function a(d,C){if(1&d&&(t.TgZ(0,"div",2),t._uU(1,"\n  "),t.TgZ(2,"span",null,3),t.Hsn(4,1),t.qZA(),t._uU(5,"\n  "),t.YNc(6,v,2,0,"span",4),t._uU(7,"\n"),t.qZA()),2&d){const l=t.MAs(3);t.xp6(6),t.Q6J("ngIf",!l.innerHTML.trim())}}function i(d,C){1&d&&(t.TgZ(0,"span"),t._uU(1,"Valid!"),t.qZA())}function c(d,C){if(1&d&&(t.TgZ(0,"div",5),t._uU(1,"\n  "),t.TgZ(2,"span",null,6),t.Hsn(4,2),t.qZA(),t._uU(5,"\n  "),t.YNc(6,i,2,0,"span",4),t._uU(7,"\n"),t.qZA()),2&d){const l=t.MAs(3);t.xp6(6),t.Q6J("ngIf",!l.innerHTML.trim())}}const P=["*",[["","invalid",""]],[["","valid",""]]],y=["*","[invalid]","[valid]"];let I=(()=>{class d{constructor(l){this.elementRef=l,this.feedbackMessage=!0,this.validFeedbackMessage=!0,this.invalidFeedbackMessage=!0,this.validClass="is-valid",this.invalidClass="is-invalid"}get isValid(){return this.setModelValidationClass(),this.checkIsValid()}get isInvalid(){return this.setModelValidationClass(),this.checkIsInvalid()}ngOnInit(){}ngAfterViewInit(){this.htmlElement=this.elementRef.nativeElement.querySelector(`#${this.model.name}`)}setModelValidationClass(){if(!this.htmlElement)return;const l=this.htmlElement.classList;l.remove(this.validClass,this.invalidClass),this.checkIsValid()&&l.add(this.validClass),this.checkIsInvalid()&&l.add(this.invalidClass)}checkIsValid(){return!!this.model&&this.model.valid&&this.model.touched}checkIsInvalid(){return!!this.model&&!this.model.valid&&this.model.touched}}return d.\u0275fac=function(l){return new(l||d)(t.Y36(t.SBq))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-form-field-feedback"],["","app-form-field-feedback",""]],contentQueries:function(l,p,r){if(1&l&&t.Suo(r,e.On,5),2&l){let m;t.iGM(m=t.CRH())&&(p.model=m.first)}},inputs:{feedbackMessage:"feedbackMessage",validFeedbackMessage:"validFeedbackMessage",invalidFeedbackMessage:"invalidFeedbackMessage",validClass:"validClass",invalidClass:"invalidClass"},ngContentSelectors:y,decls:6,vars:2,consts:[["class","invalid-feedback",4,"ngIf"],["class","valid-feedback",4,"ngIf"],[1,"invalid-feedback"],["invalidText",""],[4,"ngIf"],[1,"valid-feedback"],["validText",""]],template:function(l,p){1&l&&(t.F$t(P),t.Hsn(0),t._uU(1,"\n"),t.YNc(2,a,8,1,"div",0),t._uU(3,"\n\n"),t.YNc(4,c,8,1,"div",1),t._uU(5,"\n")),2&l&&(t.xp6(2),t.Q6J("ngIf",p.feedbackMessage&&p.invalidFeedbackMessage&&p.isInvalid),t.xp6(2),t.Q6J("ngIf",p.feedbackMessage&&p.validFeedbackMessage&&p.isValid))},directives:[u.O5],styles:[""]}),d})()},3338:(F,h,o)=>{o.d(h,{M:()=>p});var e=o(7716),t=o(4655),u=o(8583),v=o(8177),a=o(4996);let i=(()=>{class r{constructor(){this.isLoading=!1,this.changePage=new e.vpe}ngOnInit(){}onChangePage(n){if(n){const s=parseInt(n);this.changePage.emit(s)}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-paging"]],inputs:{data:"data",isLoading:"isLoading"},outputs:{changePage:"changePage"},decls:2,vars:7,consts:[["size","lg",1,"d-flex","justify-content-center",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","disabled","pageChange"]],template:function(n,s){1&n&&(e.TgZ(0,"ngb-pagination",0),e.NdJ("pageChange",function(f){return s.onChangePage(f)}),e.qZA(),e._uU(1,"\n")),2&n&&e.Q6J("collectionSize",null==s.data?null:s.data.totalItems)("page",null==s.data?null:s.data.currentPageIndex)("pageSize",null==s.data?null:s.data.itemsByPage)("maxSize",3)("rotate",!0)("boundaryLinks",!0)("disabled",s.isLoading)},directives:[a.N9],styles:[""]}),r})();var c=o(3679);const P=["searchForm"],y=["*"];let I=(()=>{class r{constructor(n){this.route=n,this.search=new e.vpe,this.lastQuery={}}ngOnInit(){this.route.queryParams.subscribe(n=>{this.refreshFormParams(n)})}ngAfterViewInit(){this.refreshData&&(this.refreshFormParams(this.refreshData),this.refreshData=void 0)}onFilter(n){const s=this.getFormElements(n.target).reduce((_,b)=>(_[b.name]=b.value?b.value:null,_),{});JSON.stringify(s,(_,b)=>{if(null!==b)return b})!=JSON.stringify(this.lastQuery)&&this.search.emit(s)}refreshFormParams(n){this.form?(this.lastQuery={},this.getFormElements(this.form.nativeElement).forEach(g=>{const f=g.name,_=n[f];_&&(g.value=_,this.lastQuery[f]=_)})):this.refreshData=n}getFormElements(n){return Array.from(n.querySelectorAll("select, input, textarea"))}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(t.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-search-bar"]],viewQuery:function(n,s){if(1&n&&e.Gf(P,5),2&n){let g;e.iGM(g=e.CRH())&&(s.form=g.first)}},outputs:{search:"search"},ngContentSelectors:y,decls:25,vars:0,consts:[[1,"d-flex","flex-row","flex-fill","align-items-center","justify-content-between","mb-1","p-3","rounded","bg-white",3,"submit"],["searchForm",""],[1,"m-1","h5","fw-bold","fs-5"],[1,"row","g-3","align-items-center"],[1,"stn-action-bar"],["type","reset","value","Reset",1,"btn","btn-outline-warning","btn-sm"],[1,"fas","fa-undo","fa-fw"],["type","submit",1,"btn","btn-outline-primary"],[1,"fas","fa-search","fa-fw"]],template:function(n,s){1&n&&(e.F$t(),e.TgZ(0,"form",0,1),e.NdJ("submit",function(f){return s.onFilter(f)}),e._uU(2,"\n  "),e.TgZ(3,"h4",2),e._uU(4,"Filter"),e.qZA(),e._uU(5,"\n  "),e.TgZ(6,"div",3),e._uU(7,"\n    "),e.Hsn(8),e._uU(9,"\n  "),e.qZA(),e._uU(10,"\n  "),e.TgZ(11,"div",4),e._uU(12,"\n    "),e.TgZ(13,"button",5),e._uU(14,"\n      "),e._UZ(15,"i",6),e._uU(16,"\n      Reset\n    "),e.qZA(),e._uU(17,"\n    "),e.TgZ(18,"button",7),e._uU(19,"\n      "),e._UZ(20,"i",8),e._uU(21,"\n      Apply\n    "),e.qZA(),e._uU(22,"\n  "),e.qZA(),e._uU(23,"\n"),e.qZA(),e._uU(24,"\n"))},directives:[c._Y,c.JL,c.F],styles:[""]}),r})();function d(r,m){if(1&r){const n=e.EpF();e.TgZ(0,"app-search-bar",4),e.NdJ("search",function(g){return e.CHM(n),e.oxw().onFilter(g)}),e._uU(1,"\n    "),e.Hsn(2,1),e._uU(3,"\n  "),e.qZA()}}const C=[[["","grid-view",""]],[["","search-fields",""]]],l=["[grid-view]","[search-fields]"];let p=(()=>{class r{constructor(n,s){this.route=n,this.router=s,this.isLoading=!1,this.searchBar=!1}get data(){return this._data}set data(n){n&&(this.isLoading=!1),this._data=n}ngOnInit(){}ngOnDestroy(){}onFilter(n){n&&(this.isLoading=!0,this.navigate(n))}onChangePage(n){n>0&&(this.isLoading=!0,this.navigate({page:n}))}navigate(n){const s=this.makeQueryParams(n);this.router.navigate([],{relativeTo:this.route,queryParams:s})}makeQueryParams(n){const g=Object.assign({},this.route.snapshot.queryParams,n);return Object.keys(n).filter(_=>null==n[_]).forEach(_=>delete g[_]),g}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(t.gz),e.Y36(t.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-grid"]],inputs:{searchBar:"searchBar",data:"data"},ngContentSelectors:l,decls:14,vars:5,consts:[[3,"search",4,"ngIf"],[1,"position-relative"],[3,"isExpandable","isLoading"],[3,"data","isLoading","changePage"],[3,"search"]],template:function(n,s){1&n&&(e.F$t(C),e.ynx(0),e._uU(1,"\n  "),e.YNc(2,d,4,0,"app-search-bar",0),e._uU(3,"\n  "),e.TgZ(4,"div",1),e._uU(5,"\n    "),e._UZ(6,"app-loader",2),e._uU(7,"\n    "),e.Hsn(8),e._uU(9,"\n  "),e.qZA(),e._uU(10,"\n  "),e.TgZ(11,"app-paging",3),e.NdJ("changePage",function(f){return s.onChangePage(f)}),e.qZA(),e._uU(12,"\n"),e.BQk(),e._uU(13,"\n")),2&n&&(e.xp6(2),e.Q6J("ngIf",s.searchBar),e.xp6(4),e.Q6J("isExpandable",!0)("isLoading",s.isLoading),e.xp6(5),e.Q6J("data",null==s.data?null:s.data.paging)("isLoading",s.isLoading))},directives:[u.O5,v.R,i,I],styles:[""]}),r})()},7109:(F,h,o)=>{o.d(h,{I:()=>v});var e=o(7716);const t=[[["","page-title",""]],[["","page-action-bar",""]],"*"],u=["[page-title]","[page-action-bar]","*"];let v=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-page"]],ngContentSelectors:u,decls:13,vars:0,consts:[[1,"container"],[1,"d-flex","flex-row","justify-content-between","align-items-center","mb-3"],[1,"fw-bold"]],template:function(c,P){1&c&&(e.F$t(t),e.TgZ(0,"div",0),e._uU(1,"\n  "),e.TgZ(2,"header",1),e._uU(3,"\n    "),e.TgZ(4,"h2",2),e.Hsn(5),e.qZA(),e._uU(6,"\n    "),e.Hsn(7,1),e._uU(8,"\n  "),e.qZA(),e._uU(9,"\n  "),e.Hsn(10,2),e._uU(11,"\n"),e.qZA(),e._uU(12,"\n"))},styles:[""]}),a})()}}]);