"use strict";(self.webpackChunkloud_6_castle=self.webpackChunkloud_6_castle||[]).push([[287],{6287:(W,T,s)=>{s.r(T),s.d(T,{FilmModule:()=>X});var o=s(1180),c=s(6814),m=s(6223),x=s(8726),F=s(2196),u=s(7300),d=s(9348),t=s(5879),_=s(8180),v=s(7398),b=s(9862),q=s(125);let h=(()=>{var n;class i{constructor(e,a){(0,o.Z)(this,"http",void 0),(0,o.Z)(this,"converter",void 0),(0,o.Z)(this,"resource","/films"),this.http=e,this.converter=a}findAll(e){return this.http.get(this.resource,{params:e}).pipe((0,_.q)(1),(0,v.U)(a=>this.converter.convert(a)))}findById(e){return this.http.get(`${this.resource}/${e}`).pipe((0,_.q)(1),(0,v.U)(a=>(a.id=this.converter.extractId(a.url),a)))}deleteById(e){return this.http.delete(`${this.resource}/${e.id}`).pipe((0,_.q)(1))}create(e){return this.http.post(this.resource,e,{observe:"response"}).pipe((0,_.q)(1),(0,v.U)(a=>a.headers.get("created")))}update(e,a){return this.http.put(`${this.resource}/${e}`,a).pipe((0,_.q)(1))}}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(b.eN),t.LFG(q.$))}),(0,o.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();var C=s(2702),U=s(2114);const D=function(n,i){return[n,i]};function I(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"tr"),t._uU(1,"\n            "),t.TgZ(2,"td"),t._uU(3),t.qZA(),t._uU(4,"\n            "),t.TgZ(5,"td"),t._uU(6),t.qZA(),t._uU(7,"\n            "),t.TgZ(8,"td"),t._uU(9),t.qZA(),t._uU(10,"\n            "),t.TgZ(11,"td"),t._uU(12),t.qZA(),t._uU(13,"\n            "),t.TgZ(14,"td"),t._uU(15),t.qZA(),t._uU(16,"\n            "),t.TgZ(17,"td"),t._uU(18),t.qZA(),t._uU(19,"\n            "),t.TgZ(20,"td"),t._uU(21,"\n              "),t.TgZ(22,"a",11),t._uU(23,"\n                "),t._UZ(24,"i",12),t._uU(25),t.qZA(),t._uU(26,"\n              "),t.TgZ(27,"a",13),t._uU(28,"\n                "),t._UZ(29,"i",14),t._uU(30,"\n              "),t.qZA(),t._uU(31,"\n              "),t.TgZ(32,"button",15),t.NdJ("click",function(a){const p=t.CHM(r).$implicit,g=t.oxw(2);return t.KtG(g.delete(p,a))}),t._uU(33,"\n                "),t._UZ(34,"i",16),t._uU(35,"\n              "),t.qZA(),t._uU(36,"\n            "),t.qZA(),t._uU(37,"\n          "),t.qZA()}if(2&n){const r=i.$implicit,e=t.oxw(2);t.xp6(3),t.Oqu(r.id),t.xp6(3),t.Oqu(r.title),t.xp6(3),t.Oqu(r.episode_id),t.xp6(3),t.Oqu(r.director),t.xp6(3),t.Oqu(r.producer),t.xp6(3),t.Oqu(r.release_date),t.xp6(4),t.Q6J("routerLink",r.id),t.xp6(3),t.hij("\n                ",e.paths.toTitle(e.paths.view),"\n              "),t.xp6(2),t.Q6J("routerLink",t.WLB(9,D,r.id,e.paths.edit))}}function E(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1,"\n    "),t.TgZ(2,"app-grid",4),t._uU(3,"\n      "),t.ynx(4,5),t._uU(5,"\n        "),t.TgZ(6,"div",6),t._uU(7,"\n          "),t._UZ(8,"input",7),t._uU(9,"\n        "),t.qZA(),t._uU(10,"\n      "),t.BQk(),t._uU(11,"\n\n      "),t.TgZ(12,"table",8),t._uU(13,"\n        "),t.TgZ(14,"thead"),t._uU(15,"\n          "),t.TgZ(16,"tr"),t._uU(17,"\n            "),t.TgZ(18,"th",9),t._uU(19,"#"),t.qZA(),t._uU(20,"\n            "),t.TgZ(21,"th",9),t._uU(22,"Title"),t.qZA(),t._uU(23,"\n            "),t.TgZ(24,"th",9),t._uU(25,"Episode"),t.qZA(),t._uU(26,"\n            "),t.TgZ(27,"th",9),t._uU(28,"Director"),t.qZA(),t._uU(29,"\n            "),t.TgZ(30,"th",9),t._uU(31,"Producer"),t.qZA(),t._uU(32,"\n            "),t.TgZ(33,"th",9),t._uU(34,"Release date"),t.qZA(),t._uU(35,"\n            "),t.TgZ(36,"th",9),t._uU(37,"Actions"),t.qZA(),t._uU(38,"\n          "),t.qZA(),t._uU(39,"\n        "),t.qZA(),t._uU(40,"\n        "),t.TgZ(41,"tbody"),t._uU(42,"\n          "),t.YNc(43,I,38,12,"tr",10),t._uU(44,"\n        "),t.qZA(),t._uU(45,"\n      "),t.qZA(),t._uU(46,"\n    "),t.qZA(),t._uU(47,"\n  "),t.qZA()),2&n){const r=i.ngIf;t.xp6(2),t.Q6J("data",r)("searchBar",!0),t.xp6(41),t.Q6J("ngForOf",r.items)}}let L=(()=>{var n;class i{constructor(e,a,l,p){(0,o.Z)(this,"route",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"renderer",void 0),(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"routes",d.Z6),(0,o.Z)(this,"paths",d.yy),(0,o.Z)(this,"data$",void 0),this.route=e,this.router=a,this.renderer=l,this.service=p}ngOnInit(){this.data$=this.route.data}changePage(e,a){this.navigate({page:a})}delete(e,a){if(!confirm(`Are you sure to delete ${e.title}?`))return;let p=a.currentTarget.parentElement;for(;!(p instanceof HTMLTableRowElement);)p=p.parentElement;this.service.deleteById(e).subscribe(g=>{console.log("DELETE call successful value returned in body",g),this.renderer.setStyle(p,"display","none")},g=>{window.alert("DELETE call in error"),console.log("DELETE call in error",g)})}navigate(e){this.router.navigate([],{relativeTo:this.route,queryParams:e})}}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(t.Qsj),t.Y36(h))}),(0,o.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-film-list"]],decls:14,vars:7,consts:[["page-title",""],["page-action-bar","","role","button",1,"btn","btn-primary",3,"routerLink"],[1,"fas","fa-plus","fa-fw"],[4,"ngIf"],[3,"data","searchBar"],["search-fields",""],[1,"col-auto"],["id","title","name","title","placeholder","Title","type","text",1,"form-control"],["grid-view","",1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["role","button",1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"far","fa-eye","fa-tw"],["role","button",1,"btn","btn-outline-info","btn-sm",3,"routerLink"],[1,"fas","fa-pencil-alt","fa-fw"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt","fa-fw"]],template:function(e,a){if(1&e&&(t.TgZ(0,"app-page"),t._uU(1,"\n  "),t.TgZ(2,"span",0),t._uU(3),t.qZA(),t._uU(4,"\n  "),t.TgZ(5,"a",1),t._uU(6,"\n    "),t._UZ(7,"i",2),t._uU(8),t.qZA(),t._uU(9,"\n\n  "),t.YNc(10,E,48,3,"div",3),t.ALo(11,"async"),t._uU(12,"\n"),t.qZA(),t._uU(13,"\n")),2&e){let l;t.xp6(3),t.Oqu(a.routes.starwars.children.film.plural.title),t.xp6(2),t.Q6J("routerLink",a.paths.create),t.xp6(3),t.AsE(" ",a.paths.toTitle(a.paths.create)," ",a.routes.starwars.children.film.title,"\n  "),t.xp6(2),t.Q6J("ngIf",null==(l=t.lcZ(11,5,a.data$))?null:l.page)}},dependencies:[c.sg,c.O5,u.rH,C.M,U.I,c.Ov],encapsulation:2})),i})(),A=(()=>{var n;class i{constructor(e){(0,o.Z)(this,"service",void 0),this.service=e}resolve(e){const a=e.paramMap.get("id");return this.service.findById(a)}}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(h))}),(0,o.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})();var f,w=s(7582),y=s(1791),O=s(7167),Y=s(5029);function J(n,i){if(1&n&&(t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&n){const r=t.oxw(2);t.xp6(1),t.hij("Editing: ",r.pristineData.title,"")}}function R(n,i){1&n&&(t._uU(0,"\n    "),t.TgZ(1,"h4"),t._uU(2,"Add new film"),t.qZA(),t._uU(3,"\n  "))}function $(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"app-page"),t._uU(1,"\n  "),t.YNc(2,J,2,1,"span",1),t._uU(3,"\n  "),t.YNc(4,R,4,0,"ng-template",null,2,t.W1O),t._uU(6,"\n\n  "),t.TgZ(7,"app-form",3),t.NdJ("formSubmit",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.submit())}),t._uU(8,"\n    "),t.TgZ(9,"div",4),t._uU(10,"\n      "),t.TgZ(11,"label",5),t._uU(12,"Title"),t.qZA(),t._uU(13,"\n      "),t._UZ(14,"input",6),t._uU(15,"\n    "),t.qZA(),t._uU(16,"\n  "),t.qZA(),t._uU(17,"\n"),t.qZA()}if(2&n){const r=t.MAs(5),e=t.oxw();t.xp6(2),t.Q6J("ngIf",null==e.pristineData?null:e.pristineData.id)("ngIfElse",r),t.xp6(5),t.Q6J("formGroup",e.formR)("edit",!(null==e.pristineData||!e.pristineData.id))}}let Z=((0,o.Z)(f=class{constructor(i,r,e,a){(0,o.Z)(this,"formBuilder",void 0),(0,o.Z)(this,"route",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"pristineData",void 0),(0,o.Z)(this,"formData",{}),(0,o.Z)(this,"formR",void 0),(0,o.Z)(this,"form",void 0),this.formBuilder=i,this.route=r,this.router=e,this.service=a}ngOnInit(){this.route.data.pipe((0,y.t)(this)).subscribe(i=>{this.pristineData=i.data,this.formData={...this.pristineData}}),this.formR=this.formBuilder.group({title:[this.formData?.title,m.kI.required]})}save(i){const r=this.createFilm();r.title=i.title,this.service.create(r).subscribe(e=>{console.log("CREATE call successful value returned in body",e),this.router.navigate([e],{relativeTo:this.route.parent})},e=>{window.alert("CREATE call in error"),console.log("CREATE call in error",e)})}update(i,r){this.service.update(r,i).subscribe(e=>{console.log("UPDATE call successful value returned in body",e),this.router.navigate(["../"],{relativeTo:this.route})},e=>{window.alert("UPDATE call in error"),console.log("UPDATE call in error",e)})}submit(){return this.pristineData?this.update(this.formR.value,this.pristineData.id):this.save(this.formR.value),!1}createFilm(){return{id:0,title:"",episode_id:(7,20,13*Math.random()+7),opening_crawl:"sinopse",director:"director",producer:"string",release_date:new Date,characters:["https://swapi.dev/api/people/2/"],planets:["https://swapi.dev/api/planets/1/"],starships:["https://swapi.dev/api/starships/21/"],vehicles:["https://swapi.dev/api/vehicles/4/"],species:["https://swapi.dev/api/species/1/"],created:(new Date).toISOString().substring(0,10),edited:(new Date).toISOString().substring(0,10),url:"https://swapi.dev/api/films/"}}},"\u0275fac",function(i){return new(i||f)(t.Y36(m.qu),t.Y36(u.gz),t.Y36(u.F0),t.Y36(h))}),(0,o.Z)(f,"\u0275cmp",t.Xpm({type:f,selectors:[["app-film-form"]],viewQuery:function(i,r){if(1&i&&t.Gf(F.Ur,5),2&i){let e;t.iGM(e=t.CRH())&&(r.form=e.first)}},decls:2,vars:1,consts:[[4,"ngIf"],["page-title","",4,"ngIf","ngIfElse"],["creationTitle",""],[3,"formGroup","edit","formSubmit"],["app-form-field-feedback","",1,"form-group"],["for","title"],["type","text","id","title","name","title","placeholder","Enter title","formControlName","title",1,"form-control"],["page-title",""]],template:function(i,r){1&i&&(t.YNc(0,$,18,4,"app-page",0),t._uU(1,"\n")),2&i&&t.Q6J("ngIf",r.formData)},dependencies:[c.O5,m.Fj,m.JJ,m.JL,U.I,O.U,Y.I,m.sg,m.u],encapsulation:2})),f);function Q(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(r.value)}}function N(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const r=i.$implicit;t.xp6(1),t.Oqu(r)}}function B(n,i){if(1&n&&(t.TgZ(0,"ul"),t._uU(1,"\n        "),t.YNc(2,N,2,1,"li",8),t._uU(3,"\n      "),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(2),t.Q6J("ngForOf",r.value)}}function S(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1,"\n      "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," "),t.YNc(5,Q,2,1,"span",0),t._uU(6,"\n      "),t.YNc(7,B,4,1,"ul",0),t._uU(8,"\n    "),t.qZA()),2&n){const r=i.$implicit,e=t.oxw(2);t.xp6(3),t.hij("",r.key,":"),t.xp6(2),t.Q6J("ngIf",!e.isArray(r.value)),t.xp6(2),t.Q6J("ngIf",e.isArray(r.value))}}Z=(0,w.gn)([(0,y.c)()],Z);const G=function(n){return[n]};function j(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"app-page"),t._uU(1,"\n  "),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t._uU(4,"\n  "),t.TgZ(5,"div",2),t._uU(6,"\n    "),t.TgZ(7,"a",3),t._uU(8,"\n      "),t._UZ(9,"i",4),t._uU(10),t.qZA(),t._uU(11,"\n    "),t.TgZ(12,"button",5),t.NdJ("click",function(){const l=t.CHM(r).ngIf,p=t.oxw();return t.KtG(p.delete(l))}),t._uU(13,"\n      "),t._UZ(14,"i",6),t._uU(15),t.qZA(),t._uU(16,"\n  "),t.qZA(),t._uU(17,"\n\n  "),t.TgZ(18,"ul",7),t._uU(19,"\n    "),t.YNc(20,S,9,3,"li",8),t.ALo(21,"keyvalue"),t._uU(22,"\n  "),t.qZA(),t._uU(23,"\n"),t.qZA()}if(2&n){const r=i.ngIf,e=t.oxw();t.xp6(3),t.hij("Film: ",r.title,""),t.xp6(4),t.Q6J("routerLink",t.VKq(7,G,e.paths.edit)),t.xp6(3),t.hij("\n      ",e.paths.toTitle(e.paths.edit),"\n    "),t.xp6(5),t.hij("\n      ",e.paths.toTitle(e.paths.delete),"\n    "),t.xp6(5),t.Q6J("ngForOf",t.lcZ(21,5,r))}}let z=(()=>{var n;class i{constructor(e,a,l){(0,o.Z)(this,"route",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"paths",d.yy),(0,o.Z)(this,"data$",void 0),this.route=e,this.router=a,this.service=l}ngOnInit(){this.data$=this.route.data}delete(e){confirm(`Are you sure to delete ${e.title}?`)}isArray(e){return Array.isArray(e)}}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(h))}),(0,o.Z)(i,"\u0275cmp",t.Xpm({type:n,selectors:[["app-film-detail"]],decls:3,vars:3,consts:[[4,"ngIf"],["page-title",""],["page-action-bar","",1,"stn-action-bar"],["role","button",1,"btn","btn-outline-info","btn-sm",3,"routerLink"],[1,"fas","fa-pencil-alt","fa-fw"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt","fa-fw"],[1,"o-vertical-list"],[4,"ngFor","ngForOf"]],template:function(e,a){if(1&e&&(t.YNc(0,j,24,9,"app-page",0),t.ALo(1,"async"),t._uU(2,"\n")),2&e){let l;t.Q6J("ngIf",null==(l=t.lcZ(1,1,a.data$))?null:l.data)}},dependencies:[c.sg,c.O5,u.rH,U.I,c.Ov,c.Nd],encapsulation:2})),i})();var k=s(810);const H=[{path:d.yy.empty,children:[{path:d.yy.empty,pathMatch:"full",component:L,runGuardsAndResolvers:"paramsOrQueryParamsChange",resolve:{page:(()=>{var n;class i{constructor(e){(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"searchFilters",["title"]),this.service=e}resolve(e){const a=k.z.filter(e.queryParams,this.searchFilters);return this.service.findAll(a)}}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)(t.LFG(h))}),(0,o.Z)(i,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),i})()}},{path:d.yy.create,pathMatch:"full",component:Z},{path:d.yy.pathEdit,pathMatch:"full",component:Z,resolve:{data:A}},{path:d.yy.pathId,pathMatch:"full",component:z,resolve:{data:A}}]}];let K=(()=>{var n;class i{}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)}),(0,o.Z)(i,"\u0275mod",t.oAB({type:n})),(0,o.Z)(i,"\u0275inj",t.cJS({imports:[u.Bz.forChild(H),u.Bz]})),i})(),X=(()=>{var n;class i{}return n=i,(0,o.Z)(i,"\u0275fac",function(e){return new(e||n)}),(0,o.Z)(i,"\u0275mod",t.oAB({type:n})),(0,o.Z)(i,"\u0275inj",t.cJS({imports:[c.ez,m.u5,K,x.jF,F.Kk,m.UX]})),i})()}}]);