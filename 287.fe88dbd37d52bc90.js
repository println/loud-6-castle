"use strict";(self.webpackChunkloud_6_castle=self.webpackChunkloud_6_castle||[]).push([[287],{6287:(W,U,a)=>{a.r(U),a.d(U,{FilmModule:()=>K});var o=a(1180),u=a(6814),p=a(6223),y=a(8726),T=a(7781),l=a(7300),m=a(7684),t=a(5879),h=a(8180),Z=a(7398),x=a(9862),b=a(125);let _=(()=>{class i{constructor(e,n){(0,o.Z)(this,"http",void 0),(0,o.Z)(this,"converter",void 0),(0,o.Z)(this,"resource","/films"),this.http=e,this.converter=n}findAll(e){return this.http.get(this.resource,{params:e}).pipe((0,h.q)(1),(0,Z.U)(n=>this.converter.convert(n)))}findById(e){return this.http.get(`${this.resource}/${e}`).pipe((0,h.q)(1),(0,Z.U)(n=>(n.id=this.converter.extractId(n.url),n)))}deleteById(e){return this.http.delete(`${this.resource}/${e.id}`).pipe((0,h.q)(1))}create(e){return this.http.post(this.resource,e,{observe:"response"}).pipe((0,h.q)(1),(0,Z.U)(n=>n.headers.get("created")))}update(e,n){return this.http.put(`${this.resource}/${e}`,n).pipe((0,h.q)(1))}}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)(t.LFG(x.eN),t.LFG(b.$))}),(0,o.Z)(i,"\u0275prov",t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})),i})();var q=a(5384),v=a(2114);const C=function(i,r){return[i,r]};function D(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t._uU(1,"\n            "),t.TgZ(2,"td"),t._uU(3),t.qZA(),t._uU(4,"\n            "),t.TgZ(5,"td"),t._uU(6),t.qZA(),t._uU(7,"\n            "),t.TgZ(8,"td"),t._uU(9),t.qZA(),t._uU(10,"\n            "),t.TgZ(11,"td"),t._uU(12),t.qZA(),t._uU(13,"\n            "),t.TgZ(14,"td"),t._uU(15),t.qZA(),t._uU(16,"\n            "),t.TgZ(17,"td"),t._uU(18),t.qZA(),t._uU(19,"\n            "),t.TgZ(20,"td"),t._uU(21,"\n              "),t.TgZ(22,"a",11),t._uU(23,"\n                "),t._UZ(24,"i",12),t._uU(25),t.qZA(),t._uU(26,"\n              "),t.TgZ(27,"a",13),t._uU(28,"\n                "),t._UZ(29,"i",14),t._uU(30,"\n              "),t.qZA(),t._uU(31,"\n              "),t.TgZ(32,"button",15),t.NdJ("click",function(s){const d=t.CHM(e).$implicit,X=t.oxw(2);return t.KtG(X.delete(d,s))}),t._uU(33,"\n                "),t._UZ(34,"i",16),t._uU(35,"\n              "),t.qZA(),t._uU(36,"\n            "),t.qZA(),t._uU(37,"\n          "),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.id),t.xp6(3),t.Oqu(e.title),t.xp6(3),t.Oqu(e.episode_id),t.xp6(3),t.Oqu(e.director),t.xp6(3),t.Oqu(e.producer),t.xp6(3),t.Oqu(e.release_date),t.xp6(4),t.Q6J("routerLink",e.id),t.xp6(3),t.hij("\n                ",n.paths.toTitle(n.paths.view),"\n              "),t.xp6(2),t.Q6J("routerLink",t.WLB(9,C,e.id,n.paths.edit))}}function I(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1,"\n    "),t.TgZ(2,"app-grid",4),t._uU(3,"\n      "),t.ynx(4,5),t._uU(5,"\n        "),t.TgZ(6,"div",6),t._uU(7,"\n          "),t._UZ(8,"input",7),t._uU(9,"\n        "),t.qZA(),t._uU(10,"\n      "),t.BQk(),t._uU(11,"\n\n      "),t.TgZ(12,"table",8),t._uU(13,"\n        "),t.TgZ(14,"thead"),t._uU(15,"\n          "),t.TgZ(16,"tr"),t._uU(17,"\n            "),t.TgZ(18,"th",9),t._uU(19,"#"),t.qZA(),t._uU(20,"\n            "),t.TgZ(21,"th",9),t._uU(22,"Title"),t.qZA(),t._uU(23,"\n            "),t.TgZ(24,"th",9),t._uU(25,"Episode"),t.qZA(),t._uU(26,"\n            "),t.TgZ(27,"th",9),t._uU(28,"Director"),t.qZA(),t._uU(29,"\n            "),t.TgZ(30,"th",9),t._uU(31,"Producer"),t.qZA(),t._uU(32,"\n            "),t.TgZ(33,"th",9),t._uU(34,"Release date"),t.qZA(),t._uU(35,"\n            "),t.TgZ(36,"th",9),t._uU(37,"Actions"),t.qZA(),t._uU(38,"\n          "),t.qZA(),t._uU(39,"\n        "),t.qZA(),t._uU(40,"\n        "),t.TgZ(41,"tbody"),t._uU(42,"\n          "),t.YNc(43,D,38,12,"tr",10),t._uU(44,"\n        "),t.qZA(),t._uU(45,"\n      "),t.qZA(),t._uU(46,"\n    "),t.qZA(),t._uU(47,"\n  "),t.qZA()),2&i){const e=r.ngIf;t.xp6(2),t.Q6J("data",e)("searchBar",!0),t.xp6(41),t.Q6J("ngForOf",e.items)}}let E=(()=>{class i{constructor(e,n,s,c){(0,o.Z)(this,"route",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"renderer",void 0),(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"routes",m.Z6),(0,o.Z)(this,"paths",m.yy),(0,o.Z)(this,"data$",void 0),this.route=e,this.router=n,this.renderer=s,this.service=c}ngOnInit(){this.data$=this.route.data}changePage(e,n){this.navigate({page:n})}delete(e,n){if(!confirm(`Are you sure to delete ${e.title}?`))return;let c=n.currentTarget.parentElement;for(;!(c instanceof HTMLTableRowElement);)c=c.parentElement;this.service.deleteById(e).subscribe(d=>{console.log("DELETE call successful value returned in body",d),this.renderer.setStyle(c,"display","none")},d=>{window.alert("DELETE call in error"),console.log("DELETE call in error",d)})}navigate(e){this.router.navigate([],{relativeTo:this.route,queryParams:e})}}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(t.Qsj),t.Y36(_))}),(0,o.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-film-list"]],decls:14,vars:7,consts:[["page-title",""],["page-action-bar","","role","button",1,"btn","btn-primary",3,"routerLink"],[1,"fas","fa-plus","fa-fw"],[4,"ngIf"],[3,"data","searchBar"],["search-fields",""],[1,"col-auto"],["id","title","name","title","placeholder","Title","type","text",1,"form-control"],["grid-view","",1,"table","table-striped","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["role","button",1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"far","fa-eye","fa-tw"],["role","button",1,"btn","btn-outline-info","btn-sm",3,"routerLink"],[1,"fas","fa-pencil-alt","fa-fw"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt","fa-fw"]],template:function(e,n){if(1&e&&(t.TgZ(0,"app-page"),t._uU(1,"\n  "),t.TgZ(2,"span",0),t._uU(3),t.qZA(),t._uU(4,"\n  "),t.TgZ(5,"a",1),t._uU(6,"\n    "),t._UZ(7,"i",2),t._uU(8),t.qZA(),t._uU(9,"\n\n  "),t.YNc(10,I,48,3,"div",3),t.ALo(11,"async"),t._uU(12,"\n"),t.qZA(),t._uU(13,"\n")),2&e){let s;t.xp6(3),t.Oqu(n.routes.starwars.children.film.plural.title),t.xp6(2),t.Q6J("routerLink",n.paths.create),t.xp6(3),t.AsE(" ",n.paths.toTitle(n.paths.create)," ",n.routes.starwars.children.film.title,"\n  "),t.xp6(2),t.Q6J("ngIf",null==(s=t.lcZ(11,5,n.data$))?null:s.page)}},dependencies:[u.sg,u.O5,l.rH,q.M,v.I,u.Ov],encapsulation:2})),i})(),F=(()=>{class i{constructor(e){(0,o.Z)(this,"service",void 0),this.service=e}resolve(e){const n=e.paramMap.get("id");return this.service.findById(n)}}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)(t.LFG(_))}),(0,o.Z)(i,"\u0275prov",t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})),i})();var f,L=a(7582),A=a(1791),w=a(7167),O=a(5029);function Y(i,r){if(1&i&&(t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("Editing: ",e.pristineData.title,"")}}function J(i,r){1&i&&(t._uU(0,"\n    "),t.TgZ(1,"h4"),t._uU(2,"Add new film"),t.qZA(),t._uU(3,"\n  "))}function R(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-page"),t._uU(1,"\n  "),t.YNc(2,Y,2,1,"span",1),t._uU(3,"\n  "),t.YNc(4,J,4,0,"ng-template",null,2,t.W1O),t._uU(6,"\n\n  "),t.TgZ(7,"app-form",3),t.NdJ("formSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.submit())}),t._uU(8,"\n    "),t.TgZ(9,"div",4),t._uU(10,"\n      "),t.TgZ(11,"label",5),t._uU(12,"Title"),t.qZA(),t._uU(13,"\n      "),t._UZ(14,"input",6),t._uU(15,"\n    "),t.qZA(),t._uU(16,"\n  "),t.qZA(),t._uU(17,"\n"),t.qZA()}if(2&i){const e=t.MAs(5),n=t.oxw();t.xp6(2),t.Q6J("ngIf",null==n.pristineData?null:n.pristineData.id)("ngIfElse",e),t.xp6(5),t.Q6J("formGroup",n.formR)("edit",!(null==n.pristineData||!n.pristineData.id))}}let g=((0,o.Z)(f=class{constructor(r,e,n,s){(0,o.Z)(this,"formBuilder",void 0),(0,o.Z)(this,"route",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"pristineData",void 0),(0,o.Z)(this,"formData",{}),(0,o.Z)(this,"formR",void 0),(0,o.Z)(this,"form",void 0),this.formBuilder=r,this.route=e,this.router=n,this.service=s}ngOnInit(){this.route.data.pipe((0,A.t)(this)).subscribe(r=>{this.pristineData=r.data,this.formData={...this.pristineData}}),this.formR=this.formBuilder.group({title:[this.formData?.title,p.kI.required]})}save(r){const e=this.createFilm();e.title=r.title,this.service.create(e).subscribe(n=>{console.log("CREATE call successful value returned in body",n),this.router.navigate([n],{relativeTo:this.route.parent})},n=>{window.alert("CREATE call in error"),console.log("CREATE call in error",n)})}update(r,e){this.service.update(e,r).subscribe(n=>{console.log("UPDATE call successful value returned in body",n),this.router.navigate(["../"],{relativeTo:this.route})},n=>{window.alert("UPDATE call in error"),console.log("UPDATE call in error",n)})}submit(){return this.pristineData?this.update(this.formR.value,this.pristineData.id):this.save(this.formR.value),!1}createFilm(){return{id:0,title:"",episode_id:(7,20,13*Math.random()+7),opening_crawl:"sinopse",director:"director",producer:"string",release_date:new Date,characters:["https://swapi.dev/api/people/2/"],planets:["https://swapi.dev/api/planets/1/"],starships:["https://swapi.dev/api/starships/21/"],vehicles:["https://swapi.dev/api/vehicles/4/"],species:["https://swapi.dev/api/species/1/"],created:(new Date).toISOString().substring(0,10),edited:(new Date).toISOString().substring(0,10),url:"https://swapi.dev/api/films/"}}},"\u0275fac",function(r){return new(r||f)(t.Y36(p.qu),t.Y36(l.gz),t.Y36(l.F0),t.Y36(_))}),(0,o.Z)(f,"\u0275cmp",t.Xpm({type:f,selectors:[["app-film-form"]],viewQuery:function(r,e){if(1&r&&t.Gf(T.Ur,5),2&r){let n;t.iGM(n=t.CRH())&&(e.form=n.first)}},decls:2,vars:1,consts:[[4,"ngIf"],["page-title","",4,"ngIf","ngIfElse"],["creationTitle",""],[3,"formGroup","edit","formSubmit"],["app-form-field-feedback","",1,"form-group"],["for","title"],["type","text","id","title","name","title","placeholder","Enter title","formControlName","title",1,"form-control"],["page-title",""]],template:function(r,e){1&r&&(t.YNc(0,R,18,4,"app-page",0),t._uU(1,"\n")),2&r&&t.Q6J("ngIf",e.formData)},dependencies:[u.O5,p.Fj,p.JJ,p.JL,v.I,w.U,O.I,p.sg,p.u],encapsulation:2})),f);function M(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.value)}}function Q(i,r){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e)}}function N(i,r){if(1&i&&(t.TgZ(0,"ul"),t._uU(1,"\n        "),t.YNc(2,Q,2,1,"li",8),t._uU(3,"\n      "),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngForOf",e.value)}}function B(i,r){if(1&i&&(t.TgZ(0,"li"),t._uU(1,"\n      "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," "),t.YNc(5,M,2,1,"span",0),t._uU(6,"\n      "),t.YNc(7,N,4,1,"ul",0),t._uU(8,"\n    "),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(3),t.hij("",e.key,":"),t.xp6(2),t.Q6J("ngIf",!n.isArray(e.value)),t.xp6(2),t.Q6J("ngIf",n.isArray(e.value))}}g=(0,L.gn)([(0,A.c)()],g);const S=function(i){return[i]};function G(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-page"),t._uU(1,"\n  "),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t._uU(4,"\n  "),t.TgZ(5,"div",2),t._uU(6,"\n    "),t.TgZ(7,"a",3),t._uU(8,"\n      "),t._UZ(9,"i",4),t._uU(10),t.qZA(),t._uU(11,"\n    "),t.TgZ(12,"button",5),t.NdJ("click",function(){const c=t.CHM(e).ngIf,d=t.oxw();return t.KtG(d.delete(c))}),t._uU(13,"\n      "),t._UZ(14,"i",6),t._uU(15),t.qZA(),t._uU(16,"\n  "),t.qZA(),t._uU(17,"\n\n  "),t.TgZ(18,"ul",7),t._uU(19,"\n    "),t.YNc(20,B,9,3,"li",8),t.ALo(21,"keyvalue"),t._uU(22,"\n  "),t.qZA(),t._uU(23,"\n"),t.qZA()}if(2&i){const e=r.ngIf,n=t.oxw();t.xp6(3),t.hij("Film: ",e.title,""),t.xp6(4),t.Q6J("routerLink",t.VKq(7,S,n.paths.edit)),t.xp6(3),t.hij("\n      ",n.paths.toTitle(n.paths.edit),"\n    "),t.xp6(5),t.hij("\n      ",n.paths.toTitle(n.paths.delete),"\n    "),t.xp6(5),t.Q6J("ngForOf",t.lcZ(21,5,e))}}let j=(()=>{class i{constructor(e,n,s){(0,o.Z)(this,"route",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"paths",m.yy),(0,o.Z)(this,"data$",void 0),this.route=e,this.router=n,this.service=s}ngOnInit(){this.data$=this.route.data}delete(e){confirm(`Are you sure to delete ${e.title}?`)}isArray(e){return Array.isArray(e)}}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)(t.Y36(l.gz),t.Y36(l.F0),t.Y36(_))}),(0,o.Z)(i,"\u0275cmp",t.Xpm({type:i,selectors:[["app-film-detail"]],decls:3,vars:3,consts:[[4,"ngIf"],["page-title",""],["page-action-bar","",1,"stn-action-bar"],["role","button",1,"btn","btn-outline-info","btn-sm",3,"routerLink"],[1,"fas","fa-pencil-alt","fa-fw"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt","fa-fw"],[1,"o-vertical-list"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e&&(t.YNc(0,G,24,9,"app-page",0),t.ALo(1,"async"),t._uU(2,"\n")),2&e){let s;t.Q6J("ngIf",null==(s=t.lcZ(1,1,n.data$))?null:s.data)}},dependencies:[u.sg,u.O5,l.rH,v.I,u.Ov,u.Nd],encapsulation:2})),i})();var z=a(810);const P=[{path:m.yy.empty,children:[{path:m.yy.empty,pathMatch:"full",component:E,runGuardsAndResolvers:"paramsOrQueryParamsChange",resolve:{page:(()=>{class i{constructor(e){(0,o.Z)(this,"service",void 0),(0,o.Z)(this,"searchFilters",["title"]),this.service=e}resolve(e){const n=z.z.filter(e.queryParams,this.searchFilters);return this.service.findAll(n)}}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)(t.LFG(_))}),(0,o.Z)(i,"\u0275prov",t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})),i})()}},{path:m.yy.create,pathMatch:"full",component:g},{path:m.yy.pathEdit,pathMatch:"full",component:g,resolve:{data:F}},{path:m.yy.pathId,pathMatch:"full",component:j,resolve:{data:F}}]}];let H=(()=>{class i{}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)}),(0,o.Z)(i,"\u0275mod",t.oAB({type:i})),(0,o.Z)(i,"\u0275inj",t.cJS({imports:[l.Bz.forChild(P),l.Bz]})),i})(),K=(()=>{class i{}return(0,o.Z)(i,"\u0275fac",function(e){return new(e||i)}),(0,o.Z)(i,"\u0275mod",t.oAB({type:i})),(0,o.Z)(i,"\u0275inj",t.cJS({imports:[u.ez,p.u5,H,y.jF,T.Kk,p.UX]})),i})()}}]);