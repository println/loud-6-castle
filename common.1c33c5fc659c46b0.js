"use strict";(self.webpackChunkloud_6_castle=self.webpackChunkloud_6_castle||[]).push([[592],{125:(P,m,o)=>{o.d(m,{$:()=>_});var r=o(1180),e=o(5879);let _=(()=>{class g{convert(n){const s={};s.totalItems=n.count,s.nextPageIndex=this.extractPageIndex(n.next),s.previousPageIndex=this.extractPageIndex(n.previous),s.currentPageIndex=this.getCurrent(s),s.itemsByPage=this.getPageSize(n);const l={};return l.items=this.setId(n.results),l.paging=s,l}extractId(n){let s=n.match(/(\d+)/g)||[];return parseInt(s)}setId(n){return n.map(s=>(s.id=this.extractId(s.url),s))}extractPageIndex(n){if(n){let s=n.match(/(\d+)/g)||[];return this.fixIndex(s)}return 0}getCurrent(n){return n.nextPageIndex?n.nextPageIndex-1:n.previousPageIndex?n.previousPageIndex+1:1}getPageSize(n){return 10}fixIndex(n){return n?parseInt(n):0}}return(0,r.Z)(g,"\u0275fac",function(n){return new(n||g)}),(0,r.Z)(g,"\u0275prov",e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})),g})()},810:(P,m,o)=>{o.d(m,{z:()=>r});class r{static filter(_,g=[]){if(!_)return{};const h=["size","page","sort"].concat(g);return Object.entries(_).filter(([n,s])=>h.includes(n)).reduce((n,s)=>(n[s[0]]=s[1],n),{})}}},5384:(P,m,o)=>{o.d(m,{M:()=>I});var r=o(1180),e=o(5879),_=o(7300),g=o(6814),h=o(8726);let n=(()=>{class i{constructor(){(0,r.Z)(this,"data",void 0),(0,r.Z)(this,"isLoading",!1),(0,r.Z)(this,"changePage",new e.vpe)}ngOnInit(){}onChangePage(t){if(t){const a=parseInt(t);this.changePage.emit(a)}}}return(0,r.Z)(i,"\u0275fac",function(t){return new(t||i)}),(0,r.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["app-paging"]],inputs:{data:"data",isLoading:"isLoading"},outputs:{changePage:"changePage"},decls:2,vars:7,consts:[["size","lg",1,"d-flex","justify-content-center",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","disabled","pageChange"]],template:function(t,a){1&t&&(e.TgZ(0,"ngb-pagination",0),e.NdJ("pageChange",function(c){return a.onChangePage(c)}),e.qZA(),e._uU(1,"\n")),2&t&&e.Q6J("collectionSize",null==a.data?null:a.data.totalItems)("page",null==a.data?null:a.data.currentPageIndex)("pageSize",null==a.data?null:a.data.itemsByPage)("maxSize",3)("rotate",!0)("boundaryLinks",!0)("disabled",a.isLoading)},dependencies:[h.N9]})),i})();var s=o(2255),l=o(6223);const v=["searchForm"],Z=["*"];let y=(()=>{class i{constructor(t){(0,r.Z)(this,"route",void 0),(0,r.Z)(this,"search",new e.vpe),(0,r.Z)(this,"form",void 0),(0,r.Z)(this,"refreshData",void 0),(0,r.Z)(this,"lastQuery",{}),this.route=t}ngOnInit(){this.route.queryParams.subscribe(t=>{this.refreshFormParams(t)})}ngAfterViewInit(){this.refreshData&&(this.refreshFormParams(this.refreshData),this.refreshData=void 0)}onFilter(t){const a=this.getFormElements(t.target).reduce((d,f)=>(d[f.name]=f.value?f.value:null,d),{});JSON.stringify(a,(d,f)=>{if(null!==f)return f})!=JSON.stringify(this.lastQuery)&&this.search.emit(a)}refreshFormParams(t){this.form?(this.lastQuery={},this.getFormElements(this.form.nativeElement).forEach(u=>{const c=u.name,d=t[c];d&&(u.value=d,this.lastQuery[c]=d)})):this.refreshData=t}getFormElements(t){return Array.from(t.querySelectorAll("select, input, textarea"))}}return(0,r.Z)(i,"\u0275fac",function(t){return new(t||i)(e.Y36(_.gz))}),(0,r.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["app-search-bar"]],viewQuery:function(t,a){if(1&t&&e.Gf(v,5),2&t){let u;e.iGM(u=e.CRH())&&(a.form=u.first)}},outputs:{search:"search"},ngContentSelectors:Z,decls:25,vars:0,consts:[[1,"d-flex","flex-row","flex-fill","align-items-center","justify-content-between","mb-1","p-3","rounded","bg-white",3,"submit"],["searchForm",""],[1,"m-1","h5","fw-bold","fs-5"],[1,"row","g-3","align-items-center"],[1,"stn-action-bar"],["type","reset","value","Reset",1,"btn","btn-outline-warning","btn-sm"],[1,"fas","fa-undo","fa-fw"],["type","submit",1,"btn","btn-outline-primary"],[1,"fas","fa-search","fa-fw"]],template:function(t,a){1&t&&(e.F$t(),e.TgZ(0,"form",0,1),e.NdJ("submit",function(c){return a.onFilter(c)}),e._uU(2,"\n  "),e.TgZ(3,"h4",2),e._uU(4,"Filter"),e.qZA(),e._uU(5,"\n  "),e.TgZ(6,"div",3),e._uU(7,"\n    "),e.Hsn(8),e._uU(9,"\n  "),e.qZA(),e._uU(10,"\n  "),e.TgZ(11,"div",4),e._uU(12,"\n    "),e.TgZ(13,"button",5),e._uU(14,"\n      "),e._UZ(15,"i",6),e._uU(16,"\n      Reset\n    "),e.qZA(),e._uU(17,"\n    "),e.TgZ(18,"button",7),e._uU(19,"\n      "),e._UZ(20,"i",8),e._uU(21,"\n      Apply\n    "),e.qZA(),e._uU(22,"\n  "),e.qZA(),e._uU(23,"\n"),e.qZA(),e._uU(24,"\n"))},dependencies:[l._Y,l.JL,l.F]})),i})();function C(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-search-bar",4),e.NdJ("search",function(u){e.CHM(t);const c=e.oxw();return e.KtG(c.onFilter(u))}),e._uU(1,"\n    "),e.Hsn(2,1),e._uU(3,"\n  "),e.qZA()}}const U=[[["","grid-view",""]],[["","search-fields",""]]],b=["[grid-view]","[search-fields]"];let I=(()=>{class i{constructor(t,a){(0,r.Z)(this,"route",void 0),(0,r.Z)(this,"router",void 0),(0,r.Z)(this,"isLoading",!1),(0,r.Z)(this,"searchBar",!1),(0,r.Z)(this,"_data",void 0),this.route=t,this.router=a}get data(){return this._data}set data(t){t&&(this.isLoading=!1),this._data=t}ngOnInit(){}ngOnDestroy(){}onFilter(t){t&&(this.isLoading=!0,this.navigate(t))}onChangePage(t){t>0&&(this.isLoading=!0,this.navigate({page:t}))}navigate(t){const a=this.makeQueryParams(t);this.router.navigate([],{relativeTo:this.route,queryParams:a})}makeQueryParams(t){const u=Object.assign({},this.route.snapshot.queryParams,t);return Object.keys(t).filter(d=>null==t[d]).forEach(d=>delete u[d]),u}}return(0,r.Z)(i,"\u0275fac",function(t){return new(t||i)(e.Y36(_.gz),e.Y36(_.F0))}),(0,r.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["app-grid"]],inputs:{searchBar:"searchBar",data:"data"},ngContentSelectors:b,decls:14,vars:5,consts:[[3,"search",4,"ngIf"],[1,"position-relative"],[3,"isExpandable","isLoading"],[3,"data","isLoading","changePage"],[3,"search"]],template:function(t,a){1&t&&(e.F$t(U),e.ynx(0),e._uU(1,"\n  "),e.YNc(2,C,4,0,"app-search-bar",0),e._uU(3,"\n  "),e.TgZ(4,"div",1),e._uU(5,"\n    "),e._UZ(6,"app-loader",2),e._uU(7,"\n    "),e.Hsn(8),e._uU(9,"\n  "),e.qZA(),e._uU(10,"\n  "),e.TgZ(11,"app-paging",3),e.NdJ("changePage",function(c){return a.onChangePage(c)}),e.qZA(),e._uU(12,"\n"),e.BQk(),e._uU(13,"\n")),2&t&&(e.xp6(2),e.Q6J("ngIf",a.searchBar),e.xp6(4),e.Q6J("isExpandable",!0)("isLoading",a.isLoading),e.xp6(5),e.Q6J("data",null==a.data?null:a.data.paging)("isLoading",a.isLoading))},dependencies:[g.O5,n,s.R,y]})),i})()},2114:(P,m,o)=>{o.d(m,{I:()=>h});var r=o(1180),e=o(5879);const _=[[["","page-title",""]],[["","page-action-bar",""]],"*"],g=["[page-title]","[page-action-bar]","*"];let h=(()=>{class n{constructor(){}ngOnInit(){}}return(0,r.Z)(n,"\u0275fac",function(l){return new(l||n)}),(0,r.Z)(n,"\u0275cmp",e.Xpm({type:n,selectors:[["app-page"]],ngContentSelectors:g,decls:13,vars:0,consts:[[1,"container"],[1,"d-flex","flex-row","justify-content-between","align-items-center","mb-3"],[1,"fw-bold"]],template:function(l,v){1&l&&(e.F$t(_),e.TgZ(0,"div",0),e._uU(1,"\n  "),e.TgZ(2,"header",1),e._uU(3,"\n    "),e.TgZ(4,"h2",2),e.Hsn(5),e.qZA(),e._uU(6,"\n    "),e.Hsn(7,1),e._uU(8,"\n  "),e.qZA(),e._uU(9,"\n  "),e.Hsn(10,2),e._uU(11,"\n"),e.qZA(),e._uU(12,"\n"))}})),n})()}}]);